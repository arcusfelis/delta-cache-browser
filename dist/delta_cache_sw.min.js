!function(e){function t(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return e[s].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";const s=n(1),i="delta-cache-v1";self.addEventListener("install",function(e){self.skipWaiting()}),self.addEventListener("activate",function(e){e.waitUntil(caches.delete(i))}),self.addEventListener("fetch",function(e){e.respondWith(caches.open(i).then(s.bind(null,e.request,self.registration.scope)))})},function(e,t,n){"use strict";function s(e,t,n){const s=n.match(e).then(t=>fetch(o.createDeltaRequest(e,t.headers.get("ETag"))).then(i.bind(null,t))).catch(()=>fetch(e));return s.then(t=>{o.cacheIfHasEtag(n,e,t.clone())}),s}function i(e,t){if(226===t.status&&t.headers.get("Delta-Base")===e.headers.get("ETag")){const n=o.patchResponse(t,e);return Promise.resolve(n)}if(304===t.status){const t=o.convert304to200(e,serverResonse.headers);return Promise.resolve(t)}return Promise.resolve(t)}const o=(n(2),n(3));n(4);e.exports=s},function(e,t){"use strict";function n(e,t){let n=s(e),i=s(t);return n.host===i.host&&n.protocol===i.protocol}function s(e){var t=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}}e.exports={isSameOrigin:n,getLocation:s}},function(e,t,n){"use strict";function s(e,t,n){return n.headers.has("ETag")?e.delete(t).then(()=>{return e.put(t,n.clone())}):Promise.resolve()}function i(e,t){const n=a.cloneHeaders(e.headers);return n.set("A-IM","vcdiff"),n.set("If-None-Match",t),new Request(e.url,{method:e.method,headers:n,mode:"navigate"===e.mode?"same-origin":e.mode,credentials:e.credentials,redirect:"manual"})}function o(e,t){e.blob().then(e=>{const n=a.cloneHeaders(t);return n.set("Content-Type",cachedResponse.headers.get("Content-Type")),n.delete("Content-Length"),header.set("X-Delta-Length","0"),new Response(e,{status:200,statusText:"OK",headers:n,url:serverResponse.url})})}function r(e,t){return Promise.all([e.arrayBuffer(),t.arrayBuffer()]).then(([n,s])=>{const i=new Uint8Array(n),o=new Uint8Array(s),r=h.decodeSync(i,o),u=a.cloneHeaders(e.headers);return t.headers.has("Content-Type")&&u.set("Content-Type",t.headers.get("Content-Type")),u.delete("Content-Length"),u.delete("Delta-Base"),u.delete("im"),u.set("X-Delta-Length",n.byteLength.toString()),new Response(r,{status:200,statusText:"OK",headers:u,url:e.url})})}const a=n(4),h=n(5);e.exports={cacheIfHasEtag:s,createDeltaRequest:i,convert304To200:o,patchResponse:r}},function(e,t){"use strict";function n(e){let t=new Headers;for(let[n,s]of e.entries())t.append(n,s);return t}function s(e){for(let[t,n]of e.entries())console.log(t+": "+n)}e.exports={cloneHeaders:n,printHeaders:s}},function(e,t,n){"use strict";function s(e,t){let n=new o(e,t);return n.decode()}function i(e,t){}const o=(n(6),n(7));e.exports={decodeSync:s,decode:i}},function(e,t){"use strict";function n(e){let t={};return e.forEach(e=>{let n=function(t){var n=Error.apply(this,arguments);n.name=this.name=e,this.stack=n.stack,this.message=n.message,this.name=e,this.message=t};n.prototype=Object.create(Error.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t[e]=n}),t}e.exports=n(["NotImplemented","InvalidDelta"])},function(e,t,n){"use strict";function s(e,t){this.delta=e,this.position=0,this.source=t,this.targetWindows=new r.TypedArrayList}function i(e,t,n,s){this.U=e,this.UTargetPosition=t,this.data=n,this.dataPosition=0,this.addresses=s,this.addressesPosition=0,this.nearCache=new u(4),this.sameCache=new c(3)}const o=n(6),r=n(8),a=n(9),h=n(10),u=n(13),c=n(14);s.prototype.decode=function(){for(this._consumeHeader();this._consumeWindow(););let e=this.targetWindows.typedArrays.reduce((e,t)=>t.length+e,0),t=new Uint8Array(e),n=0;for(let s=0;s<this.targetWindows.typedArrays.length;s++){let e=this.targetWindows.typedArrays[s],i=e.length;t.set(e,n),n+=i}return t},s.prototype._consumeHeader=function(){let e=214===this.delta[0]&&195===this.delta[1]&&196===this.delta[2]&&0===this.delta[3];if(!e)throw new o.InvalidDelta("first 3 bytes not VCD");let t=this.delta[4],n=1&t,s=1&t>>1;if(n||s)throw new o.NotImplemented("non-zero Hdr_Indicator (VCD_DECOMPRESS or VCD_CODETABLE bit is set)");this.position+=5},s.prototype._consumeWindow=function(){let e=this.delta[this.position++],t=1&e,n=1&e>>1;if(t&&n)throw new o.InvalidDelta("VCD_SOURCE and VCD_TARGET cannot both be set in Win_Indicator");if(t){let e,t,n;({value:e,position:this.position})=a(this.delta,this.position),{value:t,position:this.position}=a(this.delta,this.position),{value:n,position:this.position}=a(this.delta,this.position);let s=this.source.slice(t,t+e);this._buildTargetWindow(this.position,s),this.position+=n}else if(n)throw new o.NotImplemented("non-zero VCD_TARGET in Win_Indicator");return this.position<this.delta.length},s.prototype._buildTargetWindow=function(e,t){let n=h(this.delta,e),s=new Uint8Array(n.targetWindowLength),o=new r.TypedArrayList;o.add(t),o.add(s);let a=(this.source.length,new i(o,this.source.length,n.data,n.addresses));n.instructions.forEach(e=>{e.execute(a)});let u=o.typedArrays[1];this.targetWindows.add(u)},i.prototype.getNextAddressInteger=function(){let e;return{value:e,position:this.addressesPosition}=a(this.addresses,this.addressesPosition),e},i.prototype.getNextAddressByte=function(){let e=this.addresses[this.addressesPosition++];return e},e.exports=s},function(e,t){"use strict";function n(e){let t=String.fromCharCode.apply(null,e),n=decodeURIComponent(escape(t));return n}function s(e){for(var t=new Uint8Array(e.length),n=0,s=e.length;n<s;n++)t[n]=e.charCodeAt(n);return t}function i(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function o(){this.typedArrays=[],this.startIndexes=[],this.length=0}function r(e,t){let n=0,s=e.length-1;for(;n<s;){let i=Math.floor((n+s)/2);if(e[i]===t)return i;e[i]<t?n=i+1:s=i-1}return e[s]>t?s-1:s}o.prototype.add=function(e){let t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],n=t.filter(t=>e instanceof t);if(n.length<1)throw Error("Given "+typeof e+" when expected a TypedArray");let s;if(0===this.typedArrays.length)s=0;else{let e=this.startIndexes.length-1,t=this.startIndexes[e],n=this.typedArrays[e].length;s=t+n}this.startIndexes.push(s),this.typedArrays.push(e),this.length+=s+e.length},o.prototype.get=function(e){let t=r(this.startIndexes,e),n=e-this.startIndexes[t];return this.typedArrays[t][n]},o.prototype.set=function(e,t){if("number"!=typeof e||isNaN(e))throw new Error("Given non-number index: "+e);let n=r(this.startIndexes,e),s=e-this.startIndexes[n];this.typedArrays[n][s]=t},e.exports={uint8ArrayToString:n,stringToUint8Array:s,equal:i,TypedArrayList:o}},function(e,t){"use strict";function n(e,t){let n=e[t++],s=[],i=0;for(;n>=128;){if(s.unshift(n-128),n=e[t++],i>1e3)throw new Error("Integer is probably too long");i++}return s.unshift(n),{position:t,value:s.reduce((e,t,n)=>e+t*Math.pow(128,n),0)}}e.exports=n},function(e,t,n){"use strict";function s(e,t){let n,s,a,h;if({value:n,position:t}=o(e,t),0!==e[t])throw new i.NotImplemented("VCD_DECOMPRESS is not supported, Delta_Indicator must be zero at byte "+t+" and not "+e[t]);t++,{value:s,position:t}=o(e,t),{value:a,position:t}=o(e,t),{value:h,position:t}=o(e,t);let u=t+s,c=e.slice(t,u),p=u+a,d=e.slice(u,p),l=r(d),f=p+h,y=e.slice(p,f);t=f;let g={targetWindowLength:n,position:t,data:c,instructions:l,addresses:y};return g}const i=n(6),o=n(9),r=n(11);e.exports=s},function(e,t,n){"use strict";function s(e){let t=[],n=0;for(;n<e.length;){let s,a,h,u=e[n++];if(0===u)({value:h,position:n})=r(e,n),t.push(new o.RUN(h));else if(1===u)({value:h,position:n})=r(e,n),t.push(new o.ADD(h));else if(u<19)t.push(new o.ADD(u-1));else if(19===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,0));else if(u<35)t.push(new o.COPY(u-16,0));else if(35===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,1));else if(u<51)t.push(new o.COPY(u-32,1));else if(51===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,2));else if(u<67)t.push(new o.COPY(u-48,2));else if(67===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,3));else if(u<83)t.push(new o.COPY(u-64,3));else if(83===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,4));else if(u<99)t.push(new o.COPY(u-80,4));else if(99===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,5));else if(u<115)t.push(new o.COPY(u-96,5));else if(115===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,6));else if(u<131)t.push(new o.COPY(u-112,6));else if(131===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,7));else if(u<147)t.push(new o.COPY(u-127,7));else if(147===u)({value:h,position:n})=r(e,n),t.push(new o.COPY(h,8));else if(u<163)t.push(new o.COPY(u-144,8));else if(u<175)({addSize:s,copySize:a})=i(u,163),t.push(new o.ADD(s)),t.push(new o.COPY(a,0));else if(u<187)({addSize:s,copySize:a})=i(u,175),t.push(new o.ADD(s)),t.push(new o.COPY(a,1));else if(u<199)({addSize:s,copySize:a})=i(u,187),t.push(new o.ADD(s)),t.push(new o.COPY(a,2));else if(u<211)({addSize:s,copySize:a})=i(u,199),t.push(new o.ADD(s)),t.push(new o.COPY(a,3));else if(u<223)({addSize:s,copySize:a})=i(u,211),t.push(new o.ADD(s)),t.push(new o.COPY(a,4));else if(u<235)({addSize:s,copySize:a})=i(u,223),t.push(new o.ADD(s)),t.push(new o.COPY(a,5));else if(u<239)t.push(new o.ADD(u-235+1)),t.push(new o.COPY(4,6));else if(u<243)t.push(new o.ADD(u-239+1)),t.push(new o.COPY(4,7));else if(u<247)t.push(new o.ADD(u-243+1)),t.push(new o.COPY(4,8));else{if(!(u<256))throw new Error("Should not get here");t.push(new o.COPY(4,u-247)),t.push(new o.ADD(1))}}return t}function i(e,t){let n=e-t,s=Math.floor(n/3),i=s+1,o=n%3,r=o+4;return[i,r]}const o=n(12),r=n(9);e.exports=s},function(e,t,n){"use strict";function s(e){this.size=e}function i(e,t){this.size=e,this.mode=t}function o(e){this.size=e}n(9),n(8);s.prototype.name="ADD",i.prototype.name="COPY",o.prototype.name="RUN",s.prototype.execute=function(e){for(let t=0;t<this.size;t++)e.U.set(e.UTargetPosition+t,e.data[e.dataPosition+t]);e.dataPosition+=this.size,e.UTargetPosition+=this.size},i.prototype.execute=function(e){let t,n,s,i;0===this.mode?t=e.getNextAddressInteger():1===this.mode?(s=e.getNextAddressInteger(),t=e.UTargetPosition-s):(n=this.mode-2)>=0&&n<e.nearCache.size?(s=e.getNextAddressInteger(),t=e.nearCache.get(n,s),i="near"):(n=this.mode-(2+e.nearCache.size),s=e.getNextAddressByte(),t=e.sameCache.get(n,s),i="same"),e.nearCache.update(t),e.sameCache.update(t);for(let o=0;o<this.size;o++)e.U.set(e.UTargetPosition+o,e.U.get(t+o));e.UTargetPosition+=this.size},o.prototype.execute=function(e){for(let t=0;t<this.size;t++)e.U[e.UTargetPosition+t]=e.data[e.dataPosition];e.dataPosition++,e.UTargetPosition+=this.size};let r={ADD:s,COPY:i,RUN:o};e.exports=r},function(e,t){"use strict";function n(e){this.size=e,this.near=new Array(this.size).fill(0),this.nextSlot=0}n.prototype.update=function(e){this.near.length>0&&(this.near[this.nextSlot]=e,this.nextSlot=(this.nextSlot+1)%this.near.length)},n.prototype.get=function(e,t){let n=this.near[e]+t;return n},e.exports=n},function(e,t){"use strict";function n(e){this.size=e,this.same=new Array(256*this.size).fill(0)}n.prototype.update=function(e){this.same.length>0&&(this.same[e%(256*this.size)]=e)},n.prototype.get=function(e,t){let n=this.same[256*e+t];return n},e.exports=n}]);